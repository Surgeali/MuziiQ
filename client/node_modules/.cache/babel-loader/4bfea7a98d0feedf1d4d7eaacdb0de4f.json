{"ast":null,"code":"import _classCallCheck from \"/Users/surgeali/Desktop/Respositories/MuziiQ/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/surgeali/Desktop/Respositories/MuziiQ/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/surgeali/Desktop/Respositories/MuziiQ/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/surgeali/Desktop/Respositories/MuziiQ/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/surgeali/Desktop/Respositories/MuziiQ/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/surgeali/Desktop/Respositories/MuziiQ/client/src/components/keyboard.js\";\nimport React, { Component } from \"react\";\nimport \"./keyboard.css\";\nimport $ from 'jquery';\nimport { ENETDOWN, DH_CHECK_P_NOT_SAFE_PRIME } from \"constants\";\nvar cssKeyMap = {\n  a: 'white-pressed',\n  s: 'white-pressed',\n  d: 'white-pressed',\n  f: 'white-pressed',\n  g: 'white-pressed',\n  h: 'white-pressed',\n  j: 'white-pressed',\n  w: 'black-pressed',\n  e: 'black-pressed',\n  t: 'black-pressed',\n  y: 'black-pressed',\n  u: 'black-pressed',\n  m: 'powerModeOn'\n};\nvar powerMode = false;\n$(document).ready(function () {\n  $(document).keydown(function (event) {\n    // FOCUSED ON WHEN M IS PRESSED\n    // Check first if key pressed was m\n    // if m was pressed we then need to check the current class on the element\n    // if class is powerModeOn then we need to remove this class\n    // else frop in to next code block\n    if (cssKeyMap.hasOwnProperty(event.key)) {\n      if (event.key === 'm') {// let test = $(`#${event.key}`).attr(\"class\").split(' ');\n        // if (test.includes(cssKeyMap[event.key])) {\n        //     $(`#${event.key}`).removeClass(cssKeyMap[event.key]);\n        // } else {\n        //     $(`#${event.key}`).addClass(cssKeyMap[event.key]);\n        // }\n      } else {\n        $(\"#\".concat(event.key)).addClass(cssKeyMap[event.key]);\n      }\n    }\n  });\n  $(document).keyup(function (event) {\n    // console.log(keymap.hasOwnProperty(event.key));\n    if (keyMap.hasOwnProperty(event.key) && event.key !== 'm') {\n      $(\"#\".concat(event.key)).removeClass(keyMap[event.key]);\n    }\n  });\n}); // GLOBAL REFERENCES\n\nvar audioContext = new (window.AudioContext || window.webkitAudioContext)();\nvar oscList = [];\nvar masterGainNode = null;\nvar keyboard = document.querySelector(\".keyboard\");\nvar wavePicker = document.querySelector(\"select[name='waveform']\");\nvar volumeControl = document.querySelector(\"input[name='volume']\");\nvar customWaveform = null;\nvar sineTerms = null;\nvar cosineTerms = null;\nvar recordingEnabled = false;\nvar mode = undefined;\nvar key = \"\";\nvar keyMap = {\n  a: \"C\",\n  s: \"D\",\n  d: \"E\",\n  f: \"F\",\n  g: \"G\",\n  h: \"A\",\n  j: \"B\",\n  w: \"C#\",\n  e: \"D#\",\n  t: \"F#\",\n  y: \"G#\",\n  u: \"A#\"\n};\nvar chordMap = {\n  a: ['a', 'g'],\n  // c,g\n  s: ['s', 'h'],\n  // d, a\n  d: ['d', 'j'],\n  // e, b\n  f: ['f', '^', 'a', 'v'],\n  //f, c\n  g: ['g', '^', 's', 'v'],\n  //g, d\n  h: ['h', '^', 'd', 'v'],\n  //a, e\n  j: ['j', '^', 't', 'v'],\n  //b, f#\n  w: ['w', '^', 'y', 'v'],\n  //C#, g#\n  e: ['e', '^', 'u', 'v'],\n  // d#, a#\n  t: ['t', '^', 'w', 'v'],\n  //f#, c#\n  y: ['y', '^', 'e', 'v'],\n  //g#, d#\n  u: ['u', '^', 'f', 'v'] //a#, f\n\n}; // FUNCTION DECLARATIONS\n\nfunction createNoteTable() {\n  var noteFreq = [];\n\n  for (var i = 0; i < 9; i++) {\n    noteFreq[i] = [];\n  }\n\n  noteFreq[1][\"C\"] = 32.703195662574829;\n  noteFreq[1][\"C#\"] = 34.647828872109012;\n  noteFreq[1][\"D\"] = 36.708095989675945;\n  noteFreq[1][\"D#\"] = 38.890872965260113;\n  noteFreq[1][\"E\"] = 41.203444614108741;\n  noteFreq[1][\"F\"] = 43.653528929125485;\n  noteFreq[1][\"F#\"] = 46.249302838954299;\n  noteFreq[1][\"G\"] = 48.999429497718661;\n  noteFreq[1][\"G#\"] = 51.913087197493142;\n  noteFreq[1][\"A\"] = 55.0;\n  noteFreq[1][\"A#\"] = 58.270470189761239;\n  noteFreq[1][\"B\"] = 61.735412657015513;\n  noteFreq[2][\"C\"] = 65.406391325149658;\n  noteFreq[2][\"C#\"] = 69.295657744218024;\n  noteFreq[2][\"D\"] = 73.41619197935189;\n  noteFreq[2][\"D#\"] = 77.781745930520227;\n  noteFreq[2][\"E\"] = 82.406889228217482;\n  noteFreq[2][\"F\"] = 87.307057858250971;\n  noteFreq[2][\"F#\"] = 92.498605677908599;\n  noteFreq[2][\"G\"] = 97.998858995437323;\n  noteFreq[2][\"G#\"] = 103.826174394986284;\n  noteFreq[2][\"A\"] = 110.0;\n  noteFreq[2][\"A#\"] = 116.540940379522479;\n  noteFreq[2][\"B\"] = 123.470825314031027;\n  noteFreq[3][\"C\"] = 130.812782650299317;\n  noteFreq[3][\"C#\"] = 138.591315488436048;\n  noteFreq[3][\"D\"] = 146.83238395870378;\n  noteFreq[3][\"D#\"] = 155.563491861040455;\n  noteFreq[3][\"E\"] = 164.813778456434964;\n  noteFreq[3][\"F\"] = 174.614115716501942;\n  noteFreq[3][\"F#\"] = 184.997211355817199;\n  noteFreq[3][\"G\"] = 195.997717990874647;\n  noteFreq[3][\"G#\"] = 207.652348789972569;\n  noteFreq[3][\"A\"] = 220.0;\n  noteFreq[3][\"A#\"] = 233.081880759044958;\n  noteFreq[3][\"B\"] = 246.941650628062055;\n  noteFreq[4][\"C\"] = 261.625565300598634;\n  noteFreq[4][\"C#\"] = 277.182630976872096;\n  noteFreq[4][\"D\"] = 293.66476791740756;\n  noteFreq[4][\"D#\"] = 311.12698372208091;\n  noteFreq[4][\"E\"] = 329.627556912869929;\n  noteFreq[4][\"F\"] = 349.228231433003884;\n  noteFreq[4][\"F#\"] = 369.994422711634398;\n  noteFreq[4][\"G\"] = 391.995435981749294;\n  noteFreq[4][\"G#\"] = 415.304697579945138;\n  noteFreq[4][\"A\"] = 440.0;\n  noteFreq[4][\"A#\"] = 466.163761518089916;\n  noteFreq[4][\"B\"] = 493.883301256124111;\n  noteFreq[5][\"C\"] = 523.251130601197269;\n  noteFreq[5][\"C#\"] = 554.365261953744192;\n  noteFreq[5][\"D\"] = 587.32953583481512;\n  noteFreq[5][\"D#\"] = 622.253967444161821;\n  noteFreq[5][\"E\"] = 659.255113825739859;\n  noteFreq[5][\"F\"] = 698.456462866007768;\n  noteFreq[5][\"F#\"] = 739.988845423268797;\n  noteFreq[5][\"G\"] = 783.990871963498588;\n  noteFreq[5][\"G#\"] = 830.609395159890277;\n  noteFreq[5][\"A\"] = 880.0;\n  noteFreq[5][\"A#\"] = 932.327523036179832;\n  noteFreq[5][\"B\"] = 987.766602512248223;\n  noteFreq[6][\"C\"] = 1046.502261202394538;\n  noteFreq[6][\"C#\"] = 1108.730523907488384;\n  noteFreq[6][\"D\"] = 1174.659071669630241;\n  noteFreq[6][\"D#\"] = 1244.507934888323642;\n  noteFreq[6][\"E\"] = 1318.510227651479718;\n  noteFreq[6][\"F\"] = 1396.912925732015537;\n  noteFreq[6][\"F#\"] = 1479.977690846537595;\n  noteFreq[6][\"G\"] = 1567.981743926997176;\n  noteFreq[6][\"G#\"] = 1661.218790319780554;\n  noteFreq[6][\"A\"] = 1760.0;\n  noteFreq[6][\"A#\"] = 1864.655046072359665;\n  noteFreq[6][\"B\"] = 1975.533205024496447;\n  noteFreq[7][\"C\"] = 2093.004522404789077;\n  noteFreq[7][\"C#\"] = 2217.461047814976769;\n  noteFreq[7][\"D\"] = 2349.318143339260482;\n  noteFreq[7][\"D#\"] = 2489.015869776647285;\n  noteFreq[7][\"E\"] = 2637.020455302959437;\n  noteFreq[7][\"F\"] = 2793.825851464031075;\n  noteFreq[7][\"F#\"] = 2959.955381693075191;\n  noteFreq[7][\"G\"] = 3135.963487853994352;\n  noteFreq[7][\"G#\"] = 3322.437580639561108;\n  noteFreq[7][\"A\"] = 3520.0;\n  noteFreq[7][\"A#\"] = 3729.310092144719331;\n  noteFreq[7][\"B\"] = 3951.066410048992894;\n  noteFreq[8][\"C\"] = 4186.009044809578154;\n  return noteFreq;\n}\n\nvar noteFreq = createNoteTable();\nvar oscilators = {};\nvar recording = ['a', 'a', 's', 's', 'd', 'd'];\nvar octaveChange = 0;\nvar octave = 3; //The setup function is responsible for building the keyboard and preparing the app to play music.\n\nfunction setup() {\n  keyboard = document.querySelector(\".keyboard\");\n  wavePicker = document.querySelector(\"select[name='waveform']\");\n  volumeControl = document.querySelector(\"input[name='volume']\");\n  volumeControl.addEventListener(\"change\", changeVolume, false);\n  sineTerms = new Float32Array([0, 0, 1, 0, 1]);\n  cosineTerms = new Float32Array(sineTerms.length);\n  customWaveform = audioContext.createPeriodicWave(cosineTerms, sineTerms);\n  masterGainNode = audioContext.createGain();\n  masterGainNode.connect(audioContext.destination);\n  masterGainNode.gain.value = volumeControl.value;\n\n  for (var i = 0; i < 9; i++) {\n    oscList[i] = [];\n  } //keyboard pressing\n\n\n  document.onkeydown = function (event) {\n    keyDown(event);\n  };\n\n  document.onkeyup = function (event) {\n    keyUp(event);\n  }; //=============_____---------________--------=============//\n  // console.log(key, octaveChange);\n  // let freq = noteFreq[octave + octaveChange][keyMap[key]];\n  // if (freq) {\n  //     if (mode === 'record') {\n  //         recording.push(key);\n  //     }\n  //     console.log(\"HERE... \" + freq);\n  //     oscilators[key] = playTone(freq);\n  //     // function userInput(freq) {\n  //     //     recording.push(document.freq.value);\n  //     //     console.log(recording); //to confirm it has been added to the array\n  //     // }\n  // }\n\n}\n\n;\n\nfunction specialKey(event) {\n  console.log('keydown', mode);\n\n  if (event.key === 'm') {\n    powerMode = !powerMode;\n    var test = $(\"#\".concat(event.key)).attr(\"class\").split(' ');\n\n    if (test.includes(cssKeyMap[event.key])) {\n      $(\"#\".concat(event.key)).removeClass(cssKeyMap[event.key]);\n    } else {\n      $(\"#\".concat(event.key)).addClass(cssKeyMap[event.key]);\n    }\n  }\n\n  if (event.key === \"x\" || event.key === '^') {\n    octave = octave + 1;\n    return;\n  } else if (event.key === \"z\" || event.key === 'v') {\n    octave = octave - 1;\n    return;\n  }\n}\n\nfunction keyDown(event) {\n  var mappedKey = keyMap[event.key];\n  var key = event.key;\n\n  if (!keyMap[key]) {\n    return specialKey(event);\n  }\n\n  if (oscilators[event.key]) {\n    return;\n  }\n\n  if (mode === 'play') {\n    playback();\n    return;\n  } else if (mode === 'startRecording') {\n    console.log('start recording');\n    recording = [];\n    mode = 'record';\n  } // console.log(\"key \" + oscilators[event.key]);\n  //=============_____---------________--------=============//\n  // handles when in power mode for cords\n\n\n  if (!powerMode) {\n    // not in power mode\n    if (mode === 'record') {\n      recording.push(event.key);\n    }\n\n    var freq = noteFreq[octave][keyMap[key]];\n    oscilators[key] = playTone(freq);\n  } else {\n    // in power mode\n    var notes = chordMap[key];\n    console.log(\"notes\", notes); // [\"C\", \"G\"]\n    // before add to oscilator we need to verify if the key exists already\n\n    notes.forEach(function (note) {\n      if (note === \"^\") {\n        octave++;\n      } else if (note === 'v') {\n        octave--;\n      } else {\n        if (!oscilators[note]) {\n          if (mode === 'record') {\n            recording.push(note);\n          }\n\n          var _freq = noteFreq[octave][keyMap[note]];\n          console.log(note, _freq);\n          oscilators[note] = playTone(_freq);\n        }\n      }\n    });\n    console.log(oscilators);\n  }\n}\n\nfunction keyUp(event) {\n  console.log('powerMode keyUp', powerMode);\n\n  if (powerMode) {\n    console.log(oscilators);\n\n    if (chordMap[event.key]) {\n      chordMap[event.key].forEach(function (key) {\n        if (key !== \"^\" && key !== 'v') {\n          var _osc = oscilators[key];\n\n          if (_osc !== null) {\n            _osc.stop();\n\n            oscilators[key] = null;\n          }\n        }\n      });\n    }\n  } else {\n    var osc = oscilators[event.key];\n\n    if (mode === 'record') {\n      recording.push(event.key);\n      console.log(recording);\n    }\n\n    if (osc) {\n      osc.stop();\n    }\n\n    oscilators[event.key] = null;\n  }\n}\n\nfunction playback() {\n  console.log('recording', recording);\n  var handle = setInterval(function () {\n    if (recording.length === 0) {\n      clearInterval(handle);\n      return;\n    } else {\n      var _key = recording.shift();\n\n      var osc;\n      console.log('key', _key, oscilators);\n\n      if (_key === '^' || _key === 'v') {\n        _key = recording.shift();\n      }\n\n      debugger; // decide to turn osc on or off\n\n      if (osc = oscilators[_key]) {\n        if (osc) {\n          osc.stop();\n        }\n\n        oscilators[_key] = null;\n      } else {\n        var freq = noteFreq[octave][keyMap[_key]];\n\n        if (freq) {\n          oscilators[_key] = playTone(freq);\n        }\n      }\n    }\n  }, 125);\n}\n\nfunction playTone(freq) {\n  var osc = audioContext.createOscillator();\n  osc.connect(masterGainNode);\n  var type = wavePicker.options[wavePicker.selectedIndex].value;\n\n  if (type == \"custom\") {\n    osc.setPeriodicWave(customWaveform);\n  } else {\n    osc.type = type;\n  }\n\n  osc.frequency.value = freq;\n  osc.start();\n  return osc;\n}\n\nfunction changeVolume(event) {\n  masterGainNode.gain.value = volumeControl.value;\n}\n\nvar Keyboard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Keyboard, _Component);\n\n  function Keyboard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Keyboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Keyboard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.componentDidMount = function () {\n      setup();\n      $('document').keydown(function (event) {\n        console.log(event);\n\n        if (cssKeyMap.hasOwnProperty(event.key)) {\n          $(\"#\".concat(event.key)).addClass(cssKeyMap[event.key]);\n        } else {\n          console.log('hi?');\n        }\n      });\n      $(document).keyup(function (event) {\n        if (keyMap.hasOwnProperty(event.key)) {\n          $(\"#\".concat(event.key)).removeClass(cssKeyMap[event.key]);\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Keyboard, [{\n    key: \"render\",\n    value: function render() {\n      console.log('component');\n      console.log(this.props.mode);\n      mode = this.props.mode;\n\n      if (mode === 'record') {\n        mode = 'startRecording';\n      } else if (mode === 'play') {\n        playback();\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"blackBox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"powerMode\",\n        id: \"m\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      }, \" Hit 'm' for Power Mode\"), React.createElement(\"div\", {\n        id: \"keyboard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"key keyboard-normal\",\n        id: \"a\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"blackLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470\n        },\n        __self: this\n      }, \"a\"), React.createElement(\"p\", {\n        className: \"whiteNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471\n        },\n        __self: this\n      }, \"C\")), React.createElement(\"div\", {\n        className: \"powerBox\",\n        id: \"powerBox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"key keyboard-accidental\",\n        id: \"w\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"whiteLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477\n        },\n        __self: this\n      }, \"w\"), React.createElement(\"p\", {\n        className: \"blackNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478\n        },\n        __self: this\n      }, \"C#\")), React.createElement(\"div\", {\n        className: \"key keyboard-normal\",\n        id: \"s\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"blackLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482\n        },\n        __self: this\n      }, \"s\"), React.createElement(\"p\", {\n        className: \"whiteNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483\n        },\n        __self: this\n      }, \"D\")), React.createElement(\"div\", {\n        className: \"key keyboard-accidental\",\n        id: \"e\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"whiteLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487\n        },\n        __self: this\n      }, \"e\"), React.createElement(\"p\", {\n        className: \"blackNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488\n        },\n        __self: this\n      }, \"D#\")), React.createElement(\"div\", {\n        className: \"key keyboard-normal\",\n        id: \"d\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"blackLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492\n        },\n        __self: this\n      }, \"d\"), React.createElement(\"p\", {\n        className: \"whiteNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493\n        },\n        __self: this\n      }, \"E\")), React.createElement(\"div\", {\n        className: \"key keyboard-normal\",\n        id: \"f\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"blackLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497\n        },\n        __self: this\n      }, \"f\"), React.createElement(\"p\", {\n        className: \"whiteNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498\n        },\n        __self: this\n      }, \"F\")), React.createElement(\"div\", {\n        className: \"key keyboard-accidental\",\n        id: \"t\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"whiteLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502\n        },\n        __self: this\n      }, \"t\"), React.createElement(\"p\", {\n        className: \"blackNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      }, \"F#\")), React.createElement(\"div\", {\n        className: \"key keyboard-normal\",\n        id: \"g\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"blackLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 507\n        },\n        __self: this\n      }, \"g\"), React.createElement(\"p\", {\n        className: \"whiteNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508\n        },\n        __self: this\n      }, \"G\")), React.createElement(\"div\", {\n        className: \"key keyboard-accidental\",\n        id: \"y\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"whiteLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512\n        },\n        __self: this\n      }, \"y\"), React.createElement(\"p\", {\n        className: \"blackNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 513\n        },\n        __self: this\n      }, \"G#\")), React.createElement(\"div\", {\n        className: \"key keyboard-normal\",\n        id: \"h\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"blackLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517\n        },\n        __self: this\n      }, \"h\"), React.createElement(\"p\", {\n        className: \"whiteNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 518\n        },\n        __self: this\n      }, \"A\")), React.createElement(\"div\", {\n        className: \"key keyboard-accidental\",\n        id: \"u\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"whiteLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      }, \"u\"), React.createElement(\"p\", {\n        className: \"blackNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523\n        },\n        __self: this\n      }, \"A#\")), React.createElement(\"div\", {\n        className: \"key keyboard-normal\",\n        id: \"j\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 526\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"blackLetter place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527\n        },\n        __self: this\n      }, \"j\"), React.createElement(\"p\", {\n        className: \"whiteNote place\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528\n        },\n        __self: this\n      }, \"B\")), React.createElement(\"div\", {\n        className: \"octave\",\n        id: \"octave\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }, \"z= octave down \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 531\n        },\n        __self: this\n      }), \"x=octave up\"))), React.createElement(\"div\", {\n        className: \"settingsBar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      }, \"Volume: \"), React.createElement(\"input\", {\n        type: \"range\",\n        min: \"0.0\",\n        max: \"1.0\",\n        step: \"0.01\",\n        value: \"0.5\",\n        list: \"volumes\",\n        name: \"volume\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      }), React.createElement(\"datalist\", {\n        id: \"volumes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"0.0\",\n        label: \"Mute\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551\n        },\n        __self: this\n      }, \" \"), React.createElement(\"option\", {\n        value: \"1.0\",\n        label: \"100%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552\n        },\n        __self: this\n      }, \" \"))), React.createElement(\"div\", {\n        className: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556\n        },\n        __self: this\n      }, \"Current waveform: \"), React.createElement(\"select\", {\n        name: \"waveform\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 557\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"sine\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558\n        },\n        __self: this\n      }, \"Sine\"), React.createElement(\"option\", {\n        value: \"square\",\n        selected: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559\n        },\n        __self: this\n      }, \"Square\"), React.createElement(\"option\", {\n        value: \"sawtooth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560\n        },\n        __self: this\n      }, \"Sawtooth\"), React.createElement(\"option\", {\n        value: \"triangle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561\n        },\n        __self: this\n      }, \"Triangle\"), React.createElement(\"option\", {\n        value: \"custom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562\n        },\n        __self: this\n      }, \"Custom\")))));\n    }\n  }]);\n\n  return Keyboard;\n}(Component);\n\nexport default Keyboard;","map":{"version":3,"sources":["/Users/surgeali/Desktop/Respositories/MuziiQ/client/src/components/keyboard.js"],"names":["React","Component","$","ENETDOWN","DH_CHECK_P_NOT_SAFE_PRIME","cssKeyMap","a","s","d","f","g","h","j","w","e","t","y","u","m","powerMode","document","ready","keydown","event","hasOwnProperty","key","addClass","keyup","keyMap","removeClass","audioContext","window","AudioContext","webkitAudioContext","oscList","masterGainNode","keyboard","querySelector","wavePicker","volumeControl","customWaveform","sineTerms","cosineTerms","recordingEnabled","mode","undefined","chordMap","createNoteTable","noteFreq","i","oscilators","recording","octaveChange","octave","setup","addEventListener","changeVolume","Float32Array","length","createPeriodicWave","createGain","connect","destination","gain","value","onkeydown","keyDown","onkeyup","keyUp","specialKey","console","log","test","attr","split","includes","mappedKey","playback","push","freq","playTone","notes","forEach","note","osc","stop","handle","setInterval","clearInterval","shift","createOscillator","type","options","selectedIndex","setPeriodicWave","frequency","start","Keyboard","componentDidMount","props","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./keyboard.css\";\nimport $ from 'jquery';\nimport { ENETDOWN, DH_CHECK_P_NOT_SAFE_PRIME } from \"constants\";\n\n\nconst cssKeyMap = {\n    a: 'white-pressed',\n    s: 'white-pressed',\n    d: 'white-pressed',\n    f: 'white-pressed',\n    g: 'white-pressed',\n    h: 'white-pressed',\n    j: 'white-pressed',\n    w: 'black-pressed',\n    e: 'black-pressed',\n    t: 'black-pressed',\n    y: 'black-pressed',\n    u: 'black-pressed',\n    m: 'powerModeOn'\n}\nvar powerMode = false;\n\n$(document).ready(() => {\n    $(document).keydown(event => {\n        // FOCUSED ON WHEN M IS PRESSED\n        // Check first if key pressed was m\n        // if m was pressed we then need to check the current class on the element\n        // if class is powerModeOn then we need to remove this class\n        // else frop in to next code block\n        if (cssKeyMap.hasOwnProperty(event.key)) {\n            if (event.key === 'm') {\n                // let test = $(`#${event.key}`).attr(\"class\").split(' ');\n                // if (test.includes(cssKeyMap[event.key])) {\n                //     $(`#${event.key}`).removeClass(cssKeyMap[event.key]);\n                // } else {\n                //     $(`#${event.key}`).addClass(cssKeyMap[event.key]);\n                // }\n            } else {\n                $(`#${event.key}`).addClass(cssKeyMap[event.key]);\n            }\n        }\n    });\n\n    $(document).keyup(event => {\n        // console.log(keymap.hasOwnProperty(event.key));\n        if (keyMap.hasOwnProperty(event.key) && event.key !== 'm') {\n            $(`#${event.key}`).removeClass(keyMap[event.key]);\n        }\n    });\n\n});\n\n// GLOBAL REFERENCES\nlet audioContext = new (window.AudioContext || window.webkitAudioContext)();\nlet oscList = [];\nlet masterGainNode = null;\nlet keyboard = document.querySelector(\".keyboard\");\nlet wavePicker = document.querySelector(\"select[name='waveform']\");\nlet volumeControl = document.querySelector(\"input[name='volume']\");\nlet customWaveform = null;\nlet sineTerms = null;\nlet cosineTerms = null;\nlet recordingEnabled = false;\nlet mode = undefined;\nlet key = \"\";\n\nconst keyMap = {\n    a: \"C\",\n    s: \"D\",\n    d: \"E\",\n    f: \"F\",\n    g: \"G\",\n    h: \"A\",\n    j: \"B\",\n    w: \"C#\",\n    e: \"D#\",\n    t: \"F#\",\n    y: \"G#\",\n    u: \"A#\"\n};\nconst chordMap = {\n    a: ['a', 'g'], // c,g\n    s: ['s', 'h'], // d, a\n    d: ['d', 'j'],// e, b\n    f: ['f', '^', 'a', 'v'],//f, c\n    g: ['g', '^', 's', 'v'],//g, d\n    h: ['h', '^', 'd', 'v'],//a, e\n    j: ['j', '^', 't', 'v'],//b, f#\n    w: ['w', '^', 'y', 'v'],//C#, g#\n    e: ['e', '^', 'u', 'v'],// d#, a#\n    t: ['t', '^', 'w', 'v'],//f#, c#\n    y: ['y', '^', 'e', 'v'],//g#, d#\n    u: ['u', '^', 'f', 'v']//a#, f\n};\n\n// FUNCTION DECLARATIONS\nfunction createNoteTable() {\n    let noteFreq = [];\n\n    for (let i = 0; i < 9; i++) {\n        noteFreq[i] = [];\n    }\n\n    noteFreq[1][\"C\"] = 32.703195662574829;\n    noteFreq[1][\"C#\"] = 34.647828872109012;\n    noteFreq[1][\"D\"] = 36.708095989675945;\n    noteFreq[1][\"D#\"] = 38.890872965260113;\n    noteFreq[1][\"E\"] = 41.203444614108741;\n    noteFreq[1][\"F\"] = 43.653528929125485;\n    noteFreq[1][\"F#\"] = 46.249302838954299;\n    noteFreq[1][\"G\"] = 48.999429497718661;\n    noteFreq[1][\"G#\"] = 51.913087197493142;\n    noteFreq[1][\"A\"] = 55.0;\n    noteFreq[1][\"A#\"] = 58.270470189761239;\n    noteFreq[1][\"B\"] = 61.735412657015513;\n\n    noteFreq[2][\"C\"] = 65.406391325149658;\n    noteFreq[2][\"C#\"] = 69.295657744218024;\n    noteFreq[2][\"D\"] = 73.41619197935189;\n    noteFreq[2][\"D#\"] = 77.781745930520227;\n    noteFreq[2][\"E\"] = 82.406889228217482;\n    noteFreq[2][\"F\"] = 87.307057858250971;\n    noteFreq[2][\"F#\"] = 92.498605677908599;\n    noteFreq[2][\"G\"] = 97.998858995437323;\n    noteFreq[2][\"G#\"] = 103.826174394986284;\n    noteFreq[2][\"A\"] = 110.0;\n    noteFreq[2][\"A#\"] = 116.540940379522479;\n    noteFreq[2][\"B\"] = 123.470825314031027;\n\n    noteFreq[3][\"C\"] = 130.812782650299317;\n    noteFreq[3][\"C#\"] = 138.591315488436048;\n    noteFreq[3][\"D\"] = 146.83238395870378;\n    noteFreq[3][\"D#\"] = 155.563491861040455;\n    noteFreq[3][\"E\"] = 164.813778456434964;\n    noteFreq[3][\"F\"] = 174.614115716501942;\n    noteFreq[3][\"F#\"] = 184.997211355817199;\n    noteFreq[3][\"G\"] = 195.997717990874647;\n    noteFreq[3][\"G#\"] = 207.652348789972569;\n    noteFreq[3][\"A\"] = 220.0;\n    noteFreq[3][\"A#\"] = 233.081880759044958;\n    noteFreq[3][\"B\"] = 246.941650628062055;\n\n    noteFreq[4][\"C\"] = 261.625565300598634;\n    noteFreq[4][\"C#\"] = 277.182630976872096;\n    noteFreq[4][\"D\"] = 293.66476791740756;\n    noteFreq[4][\"D#\"] = 311.12698372208091;\n    noteFreq[4][\"E\"] = 329.627556912869929;\n    noteFreq[4][\"F\"] = 349.228231433003884;\n    noteFreq[4][\"F#\"] = 369.994422711634398;\n    noteFreq[4][\"G\"] = 391.995435981749294;\n    noteFreq[4][\"G#\"] = 415.304697579945138;\n    noteFreq[4][\"A\"] = 440.0;\n    noteFreq[4][\"A#\"] = 466.163761518089916;\n    noteFreq[4][\"B\"] = 493.883301256124111;\n\n    noteFreq[5][\"C\"] = 523.251130601197269;\n    noteFreq[5][\"C#\"] = 554.365261953744192;\n    noteFreq[5][\"D\"] = 587.32953583481512;\n    noteFreq[5][\"D#\"] = 622.253967444161821;\n    noteFreq[5][\"E\"] = 659.255113825739859;\n    noteFreq[5][\"F\"] = 698.456462866007768;\n    noteFreq[5][\"F#\"] = 739.988845423268797;\n    noteFreq[5][\"G\"] = 783.990871963498588;\n    noteFreq[5][\"G#\"] = 830.609395159890277;\n    noteFreq[5][\"A\"] = 880.0;\n    noteFreq[5][\"A#\"] = 932.327523036179832;\n    noteFreq[5][\"B\"] = 987.766602512248223;\n\n    noteFreq[6][\"C\"] = 1046.502261202394538;\n    noteFreq[6][\"C#\"] = 1108.730523907488384;\n    noteFreq[6][\"D\"] = 1174.659071669630241;\n    noteFreq[6][\"D#\"] = 1244.507934888323642;\n    noteFreq[6][\"E\"] = 1318.510227651479718;\n    noteFreq[6][\"F\"] = 1396.912925732015537;\n    noteFreq[6][\"F#\"] = 1479.977690846537595;\n    noteFreq[6][\"G\"] = 1567.981743926997176;\n    noteFreq[6][\"G#\"] = 1661.218790319780554;\n    noteFreq[6][\"A\"] = 1760.0;\n    noteFreq[6][\"A#\"] = 1864.655046072359665;\n    noteFreq[6][\"B\"] = 1975.533205024496447;\n\n    noteFreq[7][\"C\"] = 2093.004522404789077;\n    noteFreq[7][\"C#\"] = 2217.461047814976769;\n    noteFreq[7][\"D\"] = 2349.318143339260482;\n    noteFreq[7][\"D#\"] = 2489.015869776647285;\n    noteFreq[7][\"E\"] = 2637.020455302959437;\n    noteFreq[7][\"F\"] = 2793.825851464031075;\n    noteFreq[7][\"F#\"] = 2959.955381693075191;\n    noteFreq[7][\"G\"] = 3135.963487853994352;\n    noteFreq[7][\"G#\"] = 3322.437580639561108;\n    noteFreq[7][\"A\"] = 3520.0;\n    noteFreq[7][\"A#\"] = 3729.310092144719331;\n    noteFreq[7][\"B\"] = 3951.066410048992894;\n    noteFreq[8][\"C\"] = 4186.009044809578154;\n    return noteFreq;\n}\n\nconst noteFreq = createNoteTable();\nlet oscilators = {};\nlet recording = ['a', 'a', 's', 's', 'd', 'd'];\nlet octaveChange = 0;\nlet octave = 3;\n\n//The setup function is responsible for building the keyboard and preparing the app to play music.\nfunction setup() {\n    keyboard = document.querySelector(\".keyboard\");\n    wavePicker = document.querySelector(\"select[name='waveform']\");\n    volumeControl = document.querySelector(\"input[name='volume']\");\n\n    volumeControl.addEventListener(\"change\", changeVolume, false);\n\n    sineTerms = new Float32Array([0, 0, 1, 0, 1]);\n    cosineTerms = new Float32Array(sineTerms.length);\n    customWaveform = audioContext.createPeriodicWave(cosineTerms, sineTerms);\n    masterGainNode = audioContext.createGain();\n    masterGainNode.connect(audioContext.destination);\n    masterGainNode.gain.value = volumeControl.value;\n\n    for (let i = 0; i < 9; i++) {\n        oscList[i] = [];\n    }\n\n    //keyboard pressing\n    document.onkeydown = function (event) {\n        keyDown(event);\n    };\n\n    document.onkeyup = function (event) {\n        keyUp(event);\n    };\n\n    //=============_____---------________--------=============//\n\n    // console.log(key, octaveChange);\n\n    // let freq = noteFreq[octave + octaveChange][keyMap[key]];\n    // if (freq) {\n    //     if (mode === 'record') {\n    //         recording.push(key);\n\n    //     }\n    //     console.log(\"HERE... \" + freq);\n    //     oscilators[key] = playTone(freq);\n\n    //     // function userInput(freq) {\n    //     //     recording.push(document.freq.value);\n    //     //     console.log(recording); //to confirm it has been added to the array\n    //     // }\n    // }\n};\n\nfunction specialKey(event) {\n    console.log('keydown', mode);\n    if (event.key === 'm') {\n        powerMode = !powerMode;\n        let test = $(`#${event.key}`).attr(\"class\").split(' ');\n        if (test.includes(cssKeyMap[event.key])) {\n            $(`#${event.key}`).removeClass(cssKeyMap[event.key]);\n        } else {\n            $(`#${event.key}`).addClass(cssKeyMap[event.key]);\n        }\n    }\n    if (event.key === \"x\" || event.key === '^') {\n        octave = octave + 1;\n        return;\n    } else if (event.key === \"z\" || event.key === 'v') {\n        octave = octave - 1;\n        return;\n    }\n\n}\n\n\nfunction keyDown(event) {\n    let mappedKey = keyMap[event.key];\n    let key = event.key;\n\n    if (!keyMap[key]) {\n        return specialKey(event);\n    }\n\n    if (oscilators[event.key]) {\n        return;\n    }\n\n    if (mode === 'play') {\n        playback();\n        return;\n    } else if (mode === 'startRecording') {\n        console.log('start recording')\n        recording = [];\n        mode = 'record';\n    }\n    // console.log(\"key \" + oscilators[event.key]);\n\n    //=============_____---------________--------=============//\n    // handles when in power mode for cords\n    if (!powerMode) {\n        // not in power mode\n        if (mode === 'record') {\n            recording.push(event.key);\n        }\n\n        let freq = noteFreq[octave][keyMap[key]];\n        oscilators[key] = playTone(freq);\n    } else {\n        // in power mode\n\n        let notes = chordMap[key];\n        console.log(\"notes\", notes); // [\"C\", \"G\"]\n        // before add to oscilator we need to verify if the key exists already\n        notes.forEach(note => {\n            if (note === \"^\") {\n                octave++;\n            } else if (note === 'v') {\n                octave--;\n            } else {\n                if (!oscilators[note]) {\n\n                    if (mode === 'record') {\n                        recording.push(note);\n                    }\n                    let freq = noteFreq[octave][keyMap[note]];\n                    console.log(note, freq)\n                    oscilators[note] = playTone(freq);\n                }\n            }\n        });\n        console.log(oscilators);\n    }\n\n\n}\n\nfunction keyUp(event) {\n    console.log('powerMode keyUp', powerMode)\n    if (powerMode) {\n        console.log(oscilators)\n\n        if (chordMap[event.key]) {\n            chordMap[event.key].forEach(key => {\n                if (key !== \"^\" && key !== 'v') {\n                    let osc = oscilators[key];\n                    if (osc !== null) {\n                        osc.stop();\n                        oscilators[key] = null;\n                    }\n                }\n            })\n        }\n    } else {\n        var osc = oscilators[event.key];\n\n        if (mode === 'record') {\n            recording.push(event.key);\n            console.log(recording)\n\n\n        }\n        if (osc) {\n            osc.stop();\n        }\n\n        oscilators[event.key] = null;\n    }\n}\n\nfunction playback() {\n    console.log('recording', recording)\n\n    let handle = setInterval(() => {\n        if (recording.length === 0) {\n            clearInterval(handle);\n            return;\n        } else {\n            let key = recording.shift();\n            let osc;\n            console.log('key', key, oscilators)\n            if (key === '^' || key === 'v') {\n                key = recording.shift();\n            }\n            debugger;\n            // decide to turn osc on or off\n            if (osc = oscilators[key]) {\n                if (osc) {\n                    osc.stop();\n                }\n                oscilators[key] = null;\n            } else {\n                let freq = noteFreq[octave][keyMap[key]];\n                if (freq) {\n                    oscilators[key] = playTone(freq);\n\n                }\n            }\n        }\n    }, 125)\n}\n\n\n\n\n\nfunction playTone(freq) {\n    let osc = audioContext.createOscillator();\n    osc.connect(masterGainNode);\n\n    let type = wavePicker.options[wavePicker.selectedIndex].value;\n\n    if (type == \"custom\") {\n        osc.setPeriodicWave(customWaveform);\n    } else {\n        osc.type = type;\n    }\n\n\n    osc.frequency.value = freq;\n    osc.start();\n\n    return osc;\n}\n\nfunction changeVolume(event) {\n    masterGainNode.gain.value = volumeControl.value;\n}\n\nclass Keyboard extends Component {\n\n\n    componentDidMount = () => {\n\n        setup();\n\n        $('document').keydown(event => {\n            console.log(event)\n            if (cssKeyMap.hasOwnProperty(event.key)) {\n                $(`#${event.key}`).addClass(cssKeyMap[event.key])\n            } else {\n                console.log('hi?');\n            }\n        });\n\n        $(document).keyup(event => {\n            if (keyMap.hasOwnProperty(event.key)) {\n                $(`#${event.key}`).removeClass(cssKeyMap[event.key])\n\n            }\n        });\n    }\n\n    render() {\n        console.log('component')\n        console.log(this.props.mode)\n        mode = this.props.mode;\n        if (mode === 'record') {\n            mode = 'startRecording';\n        } else if (mode === 'play') {\n            playback();\n        }\n\n        return (\n            <div>\n                <div className=\"container\">\n                    <div className=\"blackBox\"></div>\n                    <div class=\"powerMode\" id=\"m\"> Hit 'm' for Power Mode</div>\n\n                    <div id=\"keyboard\">\n                        <div className=\"key keyboard-normal\" id=\"a\">\n                            <p className=\"blackLetter place\">a</p>\n                            <p className=\"whiteNote place\">C</p>\n                        </div>\n\n                        <div className=\"powerBox\" id=\"powerBox\"></div>\n\n                        <div className=\"key keyboard-accidental\" id=\"w\">\n                            <p className=\"whiteLetter place\">w</p>\n                            <p className=\"blackNote place\">C#</p>\n                        </div>\n\n                        <div className=\"key keyboard-normal\" id=\"s\">\n                            <p className=\"blackLetter place\">s</p>\n                            <p className=\"whiteNote place\">D</p>\n                        </div>\n\n                        <div className=\"key keyboard-accidental\" id=\"e\">\n                            <p className=\"whiteLetter place\">e</p>\n                            <p className=\"blackNote place\">D#</p>\n                        </div>\n\n                        <div className=\"key keyboard-normal\" id=\"d\">\n                            <p className=\"blackLetter place\">d</p>\n                            <p className=\"whiteNote place\">E</p>\n                        </div>\n\n                        <div className=\"key keyboard-normal\" id=\"f\">\n                            <p className=\"blackLetter place\">f</p>\n                            <p className=\"whiteNote place\">F</p>\n                        </div>\n\n                        <div className=\"key keyboard-accidental\" id=\"t\">\n                            <p className=\"whiteLetter place\">t</p>\n                            <p className=\"blackNote place\">F#</p>\n                        </div>\n\n                        <div className=\"key keyboard-normal\" id=\"g\">\n                            <p className=\"blackLetter place\">g</p>\n                            <p className=\"whiteNote place\">G</p>\n                        </div>\n\n                        <div className=\"key keyboard-accidental\" id=\"y\">\n                            <p className=\"whiteLetter place\">y</p>\n                            <p className=\"blackNote place\">G#</p>\n                        </div>\n\n                        <div className=\"key keyboard-normal\" id=\"h\">\n                            <p className=\"blackLetter place\">h</p>\n                            <p className=\"whiteNote place\">A</p>\n                        </div>\n\n                        <div className=\"key keyboard-accidental\" id=\"u\">\n                            <p className=\"whiteLetter place\">u</p>\n                            <p className=\"blackNote place\">A#</p>\n                        </div>\n\n                        <div className=\"key keyboard-normal\" id=\"j\">\n                            <p className=\"blackLetter place\">j</p>\n                            <p className=\"whiteNote place\">B</p>\n                        </div>\n                        <div className=\"octave\" id=\"octave\">\n                            z= octave down <br />\n                            x=octave up\n                        </div>\n                    </div>\n\n                </div>\n\n                <div className=\"settingsBar\">\n                    <div className=\"left\">\n                        <span style={{ color: 'white' }}>Volume: </span>\n                        <input\n                            type=\"range\"\n                            min=\"0.0\"\n                            max=\"1.0\"\n                            step=\"0.01\"\n                            value=\"0.5\"\n                            list=\"volumes\"\n                            name=\"volume\"\n                        />\n                        <datalist id=\"volumes\">\n                            <option value=\"0.0\" label=\"Mute\"> </option>\n                            <option value=\"1.0\" label=\"100%\"> </option>\n                        </datalist>\n                    </div>\n                    <div className=\"right\">\n                        <span style={{ color: 'white' }}>Current waveform: </span>\n                        <select name=\"waveform\">\n                            <option value=\"sine\">Sine</option>\n                            <option value=\"square\" selected>Square</option>\n                            <option value=\"sawtooth\">Sawtooth</option>\n                            <option value=\"triangle\">Triangle</option>\n                            <option value=\"custom\">Custom</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Keyboard;"]},"metadata":{},"sourceType":"module"}